---
- name: Read the CSV file
  community.general.read_csv:
    path: "/path/to/your/file.csv"  # Specify the path to your CSV file
  register: csv_data

- name: Restore files from backup
  ansible.builtin.copy:
    src: "/opt/jboss/deployment_backup{{ item.destination }}{{ item.filename }}"
    dest: "{{ item.destination }}{{ item.filename }}"
    remote_src: yes
  loop: "{{ csv_data.list }}"
  loop_control:
    label: "{{ item.filename }}"  # This is optional, just to show the filename in the output

- name: Set file permissions
  ansible.builtin.file:
    path: "{{ item.destination }}{{ item.filename }}"
    mode: "{{ item.permission }}"
  loop: "{{ csv_data.list }}"
  loop_control:
    label: "{{ item.filename }}"