

#!/bin/bash

# Define the second input filename
second_input="installer.properties"

# Execute the Java command with expect to handle the input prompts
expect -c "
spawn java -cp $ORA_LIB:si-installer.jar -DCreatemodify=TRUE com.tcs.mswitch.installer.Install
expect \"Enter Installation mode:\"
send \"1\n\"
expect \"Enter property file path:\"
send \"$second_input\n\"
expect eof
"

---
- name: Execute Java program with Ansible
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Run Java program
      expect:
        command: java -cp {{ ORA_LIB }}:si-installer.jar -DCreatemodify=TRUE com.tcs.mswitch.installer.Install
        responses:
          Enter Installation mode: "1\n"
          Enter property file path: "installer.properties\n"

